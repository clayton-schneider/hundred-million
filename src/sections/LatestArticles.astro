---
import PrimaryBtn from "@components/buttons/PrimaryBtn";
import ArticleCard from "@components/cards/ArticleCard.astro";

const res = await fetch("https://simplysproutstaging.com/graphql", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    query: `
{
  articles(first: 2) {
    nodes {
      slug
      date
      title
      featuredImage {
        node {
          altText
          sourceUrl
          mediaDetails{
            height
            width
          }
        }
      }
    }
  }
}
          `,
  }),
});

const json = await res.json();
const articles = json.data.articles.nodes;
---

<section class="bg-black px-edge py-16 lg:py-36">
  <div class="max-w-screen-2xl mx-auto">
    <div class="flex flex-col xs:flex-row justify-between gap-2 items-center">
      <h2
        class="font-bebas text-7xl md:text-[130px] text-text-light text-center xs:text-left leading-none"
      >
        Latest <span class="text-primary">Articles</span>
      </h2>
      <PrimaryBtn
        color="primary"
        className="grow shrink-0 max-w-[280px] text-center"
        >View All Articles</PrimaryBtn
      >
    </div>
    <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-10">
      {articles.map((article) => <ArticleCard data={article} />)}
    </div>
  </div>
</section>
